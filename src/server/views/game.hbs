<div class=" me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden" style="background-color:rgba(0,0,0,.8);">

    {{#if isGameHost }}
        <div class="my-3 py-3"> 
            <h2 class="display-5 text-white">{{question.question_text}}</h2> 
            <p class="lead text-white">Enter Your Answers before the timer runs out!</p> 
        </div>

        <div class="row row-cols-1 row-cols-lg-2 align-items-stretch g-4 py-5">
            <div class="col">
                <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg" style="background-image: url('/images/3d5b2107-a5d1-467c-a370-a5dcef7c7931.png');background-size:cover;min-height:600px;"> 
                    <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 card-text-custom"> 
                        <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Answers Submitted <span id="lie-counter">{{existingAnswers.length}}</span></span></h3> 
                        <ul class="d-flex list-unstyled mt-auto"> 
                            <li class="me-auto"> 
                                <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 24 24">
                                    <path stroke="white" d="M12 1c-6.338 0-12 4.226-12 10.007 0 2.05.739 4.063 2.047 5.625l-1.993 6.368 6.946-3c1.705.439 3.334.641 4.864.641 7.174 0 12.136-4.439 12.136-9.634 0-5.812-5.701-10.007-12-10.007zm0 1c6.065 0 11 4.041 11 9.007 0 4.922-4.787 8.634-11.136 8.634-1.881 0-3.401-.299-4.946-.695l-5.258 2.271 1.505-4.808c-1.308-1.564-2.165-3.128-2.165-5.402 0-4.966 4.935-9.007 11-9.007zm-5 7.5c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5zm5 0c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5zm5 0c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5z"/>
                                </svg>
                            </li> 
                        </ul> 
                    </div> 
                </div>
            </div>

            <div class="col">
                <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg" style="background-image: url('/images/848223a4-3cc7-46f1-912f-476775e417c7.png');background-size:cover;min-height:600px;"> 
                    <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 card-text-custom"> 
                        <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold "> 
                            Time Remaining <span id="question-counter">120</span>
                        </h3>
                        <ul class="d-flex list-unstyled mt-auto"> 
                            <li class="me-auto"> 
                                <svg class="d-block mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                                    <path stroke="white" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"/>
                                </svg>
                            </li> 
                        </ul> 
                    </div> 
                </div>
            </div>
        </div>
    
        <script src="/socket.io/socket.io.js"></script>
        <script>

            const lobbyId = {{lobbyInfo.id}};
            const gameSessionId = {{gameSession.id}};
            const socket = io();
            const isRoomOwner = {{isGameHost}} ;

            // Join the lobby room
            socket.emit("joinLobby", lobbyId);

            // Listen for notifications
            socket.on("answer-submitted", (data) => {
                let liesCount = Number($("#lie-counter").html());
                $("#lie-counter").html(liesCount+1);
            });        

            $(document).ready(function(){
                let remainingTime = 120; 
                const interval = setInterval(() => {
                    remainingTime--;
                    $("#question-counter").html(remainingTime);
                    if (remainingTime <= 0) {
                        clearInterval(interval);
                        $.ajax({
                            url: `/lobby/${lobbyInfo.id}/game-session/${gameSessionId}/reveal-ceremony`,
                            method: "POST",
                            success: function(data){
                                console.log(data);
                            },
                            error: function(error){
                                console.log(error);
                            }
                        })
                    }
                }, 1000);
            });

        </script>

    {{else}}
        <div class="bg-body-tertiary shadow-sm mx-auto" style="width: 80%; border-radius: 21px 21px 0 0;padding:20px;">
            <div class="px-4 py-5 my-5 text-center"> 
                <h1 class="display-5 fw-bold text-body-emphasis text-white">Submit Your Answer before the Time Runs Out!</h1> 
                <div class="col-lg-4 mx-auto"> 
                    <form action="/lobby/{{lobbyInfo.id}}/play-game/{{gameSession.id}}/submit-lie" method="POST">
                        <div class="mb-4">
                            <input type="text" class="form-control" id="answer" placeholder="Your Answer" name="answer" />
                        </div>
                        <input type="submit" class="btn btn-primary btn-lg px-4 gap-3" value="Submit Answer"/> 
                    </form>  
                </div> 
            </div>
        </div>
    {{/if}}
</div>

